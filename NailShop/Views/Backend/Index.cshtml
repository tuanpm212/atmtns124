<!DOCTYPE html>
<html lang="en" class="bg-dark">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="truc.trg09@gmail.com">
    <meta name="author" content="truc.truong">
    <link href="~/Contents/css/bootstrap.css" rel="stylesheet" />
    <link href="~/Contents/css/animate.css" rel="stylesheet" />
    <link href="~/Contents/css/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Contents/css/font.css" rel="stylesheet" />
    <link href="~/Contents/css/app.css" rel="stylesheet" />
    <!--[if lt IE 9]>
      <script src="js/ie/html5shiv.js"></script>
      <script src="js/ie/respond.min.js"></script>
      <script src="js/ie/excanvas.js"></script>
    <![endif]-->
</head>
<body ng-app="app" ng-controller="appCtrl">
    <section id="content" class="m-t-lg wrapper-md animated fadeInUp">
        <div class="container aside-xxl">
            <a class="navbar-brand block text-uppercase" href="index.html">@Resources.Backend.backendName</a>
            <section class="panel panel-default bg-white m-t-lg">
                <header class="panel-heading text-center">
                    <strong>Store Admin Login</strong>
                </header>
                <form id="formSignIn" class="panel-body wrapper-lg" name="loginForm" novalidate>
                    <div class="form-group" ng-class="{ 'has-error': loginForm.UserName.$invalid && loginForm.UserName.$dirty }">
                        <label class="control-label">@Resources.Backend.lblUserName</label>
                        <input id="txtLoginName" type="text" placeholder="@Resources.Backend.pldUserName" class="form-control input-lg" name="UserName" ng-model="login.username" required>
                    </div>
                    <div class="form-group" ng-class="{ 'has-error': loginForm.Password.$invalid && loginForm.Password.$dirty }">
                        <label class="control-label">@Resources.Backend.lblPassword</label>
                        <input id="txtPassword" type="password" placeholder="@Resources.Backend.pldPassword" class="form-control input-lg" name="Password" ng-model="login.password" required>
                    </div>
                    <div id="divError" class="form-group has-error hide">
                        <div class="input-group">
                            <p class="form-control-static control-label">@Resources.Login.msgError</p>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" ng-disabled="!loginForm.$valid">@Resources.Backend.btnSignIn</button>
                </form>
            </section>
        </div>
    </section>
    <!-- App -->
    <script src="~/Scripts/jquery-1.11.3.js"></script>
    <script src="~/Scripts/AngularJs/1.3.8.angular.min.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/app.js"></script>
    <script src="~/Scripts/app.plugin.js"></script>
    <script src="~/Scripts/jquery.slimscroll.min.js"></script>
    <script>
        $("#formSignIn").submit(function (event) {
            var login = {
                LoginName: $('#txtLoginName').val(),
                Password: $('#txtPassword').val()
            }
            $.ajax({
                url: '/backend/Login',
                type: 'Post',
                data: JSON.stringify(login),
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data.IsOk)
                        window.location.href = "/backend/order";
                    else
                        $('#divError').removeClass('hide');
                }
            });
            event.preventDefault();
        });

        angular.module('app', []).controller('appCtrl', ['$scope', function ($scope) {
        }]);
    </script>

</body>

</html>